---
title: "[Web] 인증정보 Cookie, Session, Token(JWT)"
date: 2025-09-10 20:00:00 +0900
categories: [웹, 이론]   # 카테고리는 여러 계층도 가능 [상위, 하위]
tags: [Web, 인증정보]          # 해시태그처럼 글 묶기
description: "웹에서 스스로를 인증하기 위한 인증수단"
toc: true
---

# Web은 각 사용자의 요청을 어떻게 구분하는가?
---

우리가 웹사이트에 로그인할 때, 서버는 어떻게 나를 '나'라고 알아볼까요?  
단순히 아이디/비밀번호를 한 번 입력했다고 해서, 그 다음 페이지 이동 때마다 매번 다시 로그인하기는 귀찮겠죠.  

그래서 등장한 것이 **쿠키, 세션, 그리고 토큰(JWT)** 입니다.  
오늘은 이 세 가지 인증 방식의 원리와 차이점, 그리고 웹 보안 정책인 **SOP/CORS**까지 한번에 정리해보겠습니다.

---

## 🍪 쿠키 (Cookie)

- 서버가 클라이언트에게 **Key-Value 형태**로 발급하는 데이터  
- 클라이언트는 이후 요청의 **HTTP Header**에 쿠키를 담아 서버로 전송  
- **용도**
  - **정보 기록**: 팝업 다시 보지 않기, 7일간 표시 안 하기  
  - **상태 정보**: 클라이언트 식별값 (세션 ID 등)  
- **보안 이슈**  
  - 쿠키를 변조하면 타 사용자를 사칭 가능 → 보안에 취약  
  - JS에서 `document.cookie` 로 확인 가능  
  - 크롬 개발자 도구 → Application → Cookies 에서도 확인 가능  

---

## 📂 세션 (Session)

- **쿠키의 보안 취약점을 보완**하기 위해 등장  
- 인증 정보는 서버(DB/메모리)에 저장, 클라이언트는 세션 ID만 쿠키에 보관  
- 서버가 세션 ID를 확인하여 유저의 상태와 권한을 판별  
- 장점: 쿠키보다 안전  
- 단점: 서버에 세션 데이터를 저장해야 하므로 **확장성(Scale-out)** 이슈 발생  

---

## 🔑 토큰 기반 인증 (JWT)

- **JWT (JSON Web Token)**: 클라이언트가 들고 다니는 **자체 포함(Self-contained) 토큰**
- 구조: `Header.Payload.Signature`
  - **Header**: 알고리즘, 타입
  - **Payload**: 유저 정보, 권한, 만료 시간 등
  - **Signature**: 위·변조 방지용 서명
- 특징:
  - 서버에 상태 정보를 저장하지 않아도 됨 (무상태, Stateless)
  - 토큰 자체에 필요한 정보가 포함되어 있어 서버는 검증만 하면 됨
  - 쿠키 대신 **Authorization 헤더**에 `Bearer <token>` 방식으로 전달
- 장점:
  - 확장성과 분산 서비스에 적합
- 단점:
  - 토큰 크기가 커서 네트워크 부담
  - 만료 전까지 탈취 시 위험 → Refresh Token, HTTPS 등과 병행 필요

---

## 🌐 SOP (Same-Origin Policy)

- 다른 Origin(출처)의 사이트에서 **임의로 인증 정보**를 가져가지 못하도록 막는 보안 정책  
- **Origin** = `schema + host + port`  
- 다르면 Cross-Origin → 기본적으로 차단됨  
- 단, 정적 리소스(`<img>`, `<script>`, `<style>` 등)는 예외  

---

## 🔄 CORS (Cross-Origin Resource Sharing)

- 동일한 회사의 서비스 등에서 **교차 출처 요청이 필요한 경우**를 지원  
- 서버가 CORS 헤더를 통해 **허용할 Origin/Method/Header**를 지정  
- **Preflight Request**  
  - 클라이언트가 `OPTIONS` 메서드로 실제 요청 전, 허용 여부를 질의하는 과정  

| Header | 설명 |
| --- | --- |
| `Access-Control-Allow-Origin` | 허용할 Origin |
| `Access-Control-Allow-Methods` | 허용할 HTTP Methods |
| `Access-Control-Allow-Credentials` | 쿠키 사용 가능 여부 |
| `Access-Control-Allow-Headers` | 허용할 요청 헤더 |

---

## 📌 요약
- **쿠키**: Key-Value, 브라우저 저장, 변조 위험  
- **세션**: 서버 저장, 안전하지만 확장성 이슈  
- **JWT**: 무상태 인증, 확장성 우수, 탈취 시 위험  
- **SOP/CORS**: 다른 출처 접근 제어 정책  
